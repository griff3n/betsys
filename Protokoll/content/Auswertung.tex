\newpage

\paragraph{\LARGE Aufgabe 10 - Kernel Treiber}

\section{Aufgabenstellung}
	\begin{quote}
		Kompilieren Sie das Modul lkm.c und machen Sie sich mit den Befehlen zum Laden bzw. Entladen von Modulen vertraut.\\ \\
		\begin{enumerate}
			\item Vollziehen Sie den Aufbau eines Kernel Moduls nach und erg\"anzen Sie das im Info-Blatt vorgestellte Modul memory.c:\\
			\item \"Andern Sie die Major Nummer.\\
			\item Erweitern Sie das Kernel Modul so, dass 256 Byte im Buffer gespeichert werden k\"onnen (antatt 1 Byte).\\
			\item Erweitern Sie das Kernel Modul so, dass der Speicherinhalt des Buffers byteweise ausgelesen werden kann.\\
			\item Schreiben Sie ein Programm, dass sowohl die Schreib- als auch die Lesemethode des Kerneltreibers verwendet.\\
			\item Der zu speichernde Text soll beim Schreiben in den Kernel Space vom Kernel Modul mit Hilfe des printk-Befehls im Syslog-D\"amon ausgegeben werden.\\
			\item Unter welchen Bedingungen kann der vorgestellt Treiber verwendet werden, um auf reale Hardware zuzugreifen. Welche Anpassungen sind dazu notwendig?\\
		\end{enumerate}
	\end{quote}
\newpage
\section{Aufgabe 10.1}
	\subsection{Vorbereitung}
		\begin{quote}
			Wichtige Headerdateien installieren(siehe p10\_info.pdf S. 1 Z1ff).\\
			C-Projekt anlegen.\\
			Makefile schreiben.\\
		\end{quote}
	\subsection{Durchf√ºhrung}
		\begin{quote}
			Code schreiben und dann testen bzw debuggen.\\
		\end{quote}
	\subsection{Fazit}
		\begin{quote}
			Aufgabe 10.1.1\\
			Ein Kernel Modul muss ''linux/module.h'' includieren. Das Kernel Modul hat eine ''init-Methode'' die mit dem Marco ''module\_init(<init-Methode>)'' als Start-Methode definiert ist. Die Methode wird beim Einh\"angen aufgerufen. Auch hat das Modul eine ''exit-Methode'' die mit dem Marco ''module\_exit(<exit-Methode>)'' als End-Methode definiert ist. Die Methode wird beim Aush\"angen aufgerufen. Jedes Modul muss das Marco
			''MODULE\_LICENSE(<Lizenz>)'' enthalten. Es gibt noch weitere Marcos die zu Informationszwecken da sind.\\ \\
			
			Aufgabe 10.1.2\\
			\lstinputlisting[language=C, firstline=37, lastline=37]{../memory.c}
			Die Major Nummer ist in memory.c in Zeile 37 als Globale Variable definiert so ist es einfach die Major Nummer zu \"andern.\\ \\
			
			Aufgabe 10.1.3\\
			\lstinputlisting[language=C, firstline=53, lastline=59]{../memory.c}
			Es werden in der ''init-Methode'' einfach 256 Byte alokiert statt 1 Byte.\\ \\
			
			Aufgabe 10.1.6\\
			\lstinputlisting[language=C, firstline=119, lastline=128]{../memory.c}
			Mit ''printk(KERN\_INFO tmp);'' wird der zu speichernde Text ausgegeben.\\
		\end{quote}